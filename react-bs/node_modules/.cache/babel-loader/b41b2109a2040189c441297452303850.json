{"ast":null,"code":"var _jsxFileName = \"/home/pawan/frontend/react/react-bs/src/SearchPage.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport './index.css';\nimport List from './List';\nimport axios from 'axios';\nimport Paginate from './Paginate';\nimport SimpleSelect from './Filter';\nimport { queries } from '@testing-library/react';\n\nconst seperate = str => {\n  const obj = {};\n\n  if (str === \"\") {\n    return obj;\n  }\n\n  const strArr = str.slice(1).split(\"&\");\n  strArr.map(param => {\n    obj[param.split(\"=\")[0]] = param.split(\"=\")[1];\n  });\n  return obj;\n};\n\nclass SearchPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.newUpdateParam = (key, param) => {\n      this.setState({\n        [key]: param\n      }, () => this.getMovies());\n    };\n\n    this.updateParams = (search, genre, sortBy) => {\n      this.setState({\n        search: search,\n        genre: genre,\n        sortBy: sortBy\n      }, () => this.getMovies());\n    };\n\n    this.changePage = pageno => {\n      this.setState({\n        currentPage: pageno\n      });\n    };\n\n    this.state = {\n      currentPage: 1,\n      moviesPerPage: 24,\n      result: [],\n      totalMovies: 0,\n      search: this.udpateState(\"search\"),\n      genre: this.udpateState(\"genre\"),\n      sortBy: \"vote_average DESC\"\n    };\n    console.log(this.udpateState(\"genre\"), \"search\");\n  }\n\n  getquery() {\n    const query = [];\n\n    if (this.state.search !== \"\") {\n      query.push('search=' + this.state.search);\n    }\n\n    if (this.state.genre !== \"All\") {\n      query.push('genre=' + this.state.genre);\n    }\n\n    query.push('sortby=' + this.state.sortBy);\n    return 'http://localhost:8080/movie/catalogue?' + query.join('&');\n  }\n\n  getMovies() {\n    axios.get(this.getquery()).then(res => {\n      if (res.data !== null) {\n        this.setState({\n          result: res.data,\n          totalMovies: res.data.length\n        });\n      } else {\n        this.setState({\n          result: [],\n          totalMovies: 0\n        });\n      }\n    });\n  }\n\n  udpateState(query) {\n    const queryParams = this.props.location.search;\n\n    if (queryParams !== \"\") {\n      const queriesObj = seperate(queryParams);\n\n      for (let key in queriesObj) {\n        if (key === query) {\n          return queries[query];\n        }\n      }\n    }\n\n    if (query === \"genre\") {\n      return \"All\";\n    }\n\n    return \"\";\n  }\n\n  componentDidMount() {\n    // console.log(this.props.location.search)\n    // const queryParams = this.props.location.search\n    // seperate(queryParams, \"asdsada\")\n    // if (queryParams !== \"\") {\n    //     // for now we are only considering one qyery param\n    //     const params = queryParams.slice(1).split(\"&\")\n    //     if (params[0].charAt(0) === 's') {\n    //         const searchParam = params[0].split(\"=\")[1]\n    //         this.newUpdateParam(\"search\", searchParam)\n    //     } else if (params[0].charAt(0) === 'g') {\n    //         const genreParam = params[0].split(\"=\")[1]\n    //         this.newUpdateParam(\"genre\", genreParam)\n    //     }\n    // } else {\n    //     this.getMovies()\n    // }\n    console.log(this.state);\n    this.getMovies();\n  }\n\n  render() {\n    const resultList = this.state.result;\n    const result = this.state.result.slice((this.state.currentPage - 1) * this.state.moviesPerPage, this.state.currentPage * this.state.moviesPerPage);\n    const initparams = {\n      state: this.state.search,\n      genre: this.state.genre,\n      sortby: this.state.sortBy\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: \"#d2d2d275\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SimpleSelect, {\n      updateParams: this.updateParams,\n      initparams: initparams,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(List, {\n      list: result,\n      catalogueHidden: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Paginate, {\n      totalMovies: this.state.totalMovies,\n      currentPage: this.state.currentPage,\n      moviePerPage: this.state.moviesPerPage,\n      changePage: this.changePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default SearchPage;","map":{"version":3,"sources":["/home/pawan/frontend/react/react-bs/src/SearchPage.js"],"names":["React","Component","List","axios","Paginate","SimpleSelect","queries","seperate","str","obj","strArr","slice","split","map","param","SearchPage","constructor","props","newUpdateParam","key","setState","getMovies","updateParams","search","genre","sortBy","changePage","pageno","currentPage","state","moviesPerPage","result","totalMovies","udpateState","console","log","getquery","query","push","join","get","then","res","data","length","queryParams","location","queriesObj","componentDidMount","render","resultList","initparams","sortby","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport './index.css';\nimport List from './List'\nimport axios from 'axios'\nimport Paginate from './Paginate'\nimport SimpleSelect from './Filter'\nimport { queries } from '@testing-library/react';\n\n\nconst seperate = (str) => {\n    const obj = {}\n    if(str === \"\"){\n        return obj\n    }\n    const strArr = str.slice(1).split(\"&\")\n    strArr.map( (param) => {\n        obj[param.split(\"=\")[0]] = param.split(\"=\")[1] \n    })\n    return obj\n}\n\nclass SearchPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPage: 1,\n            moviesPerPage: 24,\n            result: [],\n            totalMovies: 0,\n            search: this.udpateState(\"search\"),\n            genre: this.udpateState(\"genre\"),\n            sortBy: \"vote_average DESC\"\n        }\n        console.log(this.udpateState(\"genre\"), \"search\")\n    }\n\n    getquery() {\n        const query = [];\n        if (this.state.search !== \"\") {\n            query.push('search=' + this.state.search)\n        }\n        if (this.state.genre !== \"All\") {\n            query.push('genre=' + this.state.genre)\n        }\n        query.push('sortby=' + this.state.sortBy)\n        return 'http://localhost:8080/movie/catalogue?' + query.join('&')\n    }\n\n\n    getMovies() {\n        axios.get(this.getquery())\n            .then(res => {\n                if (res.data !== null) {\n                    this.setState({\n                        result: res.data,\n                        totalMovies: res.data.length,\n                    }\n                    )\n                } else {\n                    this.setState({\n                        result: [],\n                        totalMovies: 0,\n                    }\n                    )\n                }\n            }\n            )\n    }\n\n    udpateState(query) {\n        const queryParams = this.props.location.search\n        if (queryParams !== \"\") {\n            const queriesObj = seperate(queryParams)\n            for(let key in queriesObj){\n                if(key === query){\n                    return queries[query]\n                }\n            }\n        }\n        if (query === \"genre\") {\n            return \"All\"\n        }\n        return \"\"\n\n    }\n\n    componentDidMount() {\n        // console.log(this.props.location.search)\n        // const queryParams = this.props.location.search\n        // seperate(queryParams, \"asdsada\")\n        // if (queryParams !== \"\") {\n        //     // for now we are only considering one qyery param\n        //     const params = queryParams.slice(1).split(\"&\")\n        //     if (params[0].charAt(0) === 's') {\n        //         const searchParam = params[0].split(\"=\")[1]\n        //         this.newUpdateParam(\"search\", searchParam)\n        //     } else if (params[0].charAt(0) === 'g') {\n        //         const genreParam = params[0].split(\"=\")[1]\n        //         this.newUpdateParam(\"genre\", genreParam)\n        //     }\n        // } else {\n        //     this.getMovies()\n        // }\n        console.log(this.state)\n        this.getMovies()\n    }\n\n\n    newUpdateParam = (key, param) => {\n        this.setState({\n            [key]: param,\n        },\n            () => this.getMovies()\n        )\n    }\n\n    updateParams = (search, genre, sortBy) => {\n        this.setState({\n            search: search,\n            genre: genre,\n            sortBy: sortBy,\n        },\n            () => this.getMovies()\n        )\n    }\n\n\n    changePage = (pageno) => {\n        this.setState({\n            currentPage: pageno,\n        })\n    }\n\n    render() {\n\n        const resultList = this.state.result\n\n        const result = this.state.result.slice((this.state.currentPage - 1) * this.state.moviesPerPage, this.state.currentPage * this.state.moviesPerPage);\n\n        const initparams = {\n            state: this.state.search,\n            genre: this.state.genre,\n            sortby: this.state.sortBy\n        }\n\n        return (\n            <div style={{ backgroundColor: \"#d2d2d275\" }}>\n\n                <SimpleSelect updateParams={this.updateParams} initparams={initparams} />\n                <List list={result} catalogueHidden={true} />\n                <Paginate totalMovies={this.state.totalMovies} currentPage={this.state.currentPage} moviePerPage={this.state.moviesPerPage} changePage={this.changePage} />\n\n            </div >\n        );\n    }\n}\n\nexport default SearchPage;\n"]},"metadata":{},"sourceType":"module"}