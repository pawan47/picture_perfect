{"ast":null,"code":"var _jsxFileName = \"/home/pawan/frontend/react/react-bs/src/SearchPage.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport './index.css';\nimport List from './List';\nimport axios from 'axios';\nimport Paginate from './Paginate';\nimport SimpleSelect from './Filter';\n\nclass SearchPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateParams = (search, genre, sortBy) => {\n      this.setState({\n        search: search,\n        genre: genre,\n        sortBy: sortBy\n      }, () => this.getMovies());\n    };\n\n    this.changePage = pageno => {\n      this.setState({\n        currentPage: pageno\n      });\n    };\n\n    this.state = {\n      currentPage: 1,\n      moviesPerPage: 24,\n      result: [],\n      totalMovies: 0,\n      search: \"\",\n      genre: \"All\",\n      sortBy: \"vote_average DESC\"\n    };\n  }\n\n  getquery() {\n    const query = [];\n\n    if (this.state.search !== \"\") {\n      query.push('search=' + this.state.search);\n    }\n\n    if (this.state.genre !== \"All\") {\n      query.push('genre=' + this.state.genre);\n    }\n\n    query.push('sortby=' + this.state.sortBy); // 'http://localhost:8080/movie/catalogue?' + \n    // console.log(query)\n\n    return 'http://localhost:8080/movie/catalogue?' + query.join('&');\n  }\n\n  getMovies() {\n    axios.get(this.getquery()).then(res => {\n      this.setState({\n        result: res.data,\n        totalMovies: res.data.length\n      });\n    });\n  }\n\n  componentDidMount() {\n    const queryParams = this.props.location.search;\n\n    if (queryParams !== \"\") {\n      // for now we are only considering one qyery param\n      const params = queryParams.slice(1).split(\"&\");\n      console.log(params[0].charAt(0));\n\n      if (params[0].charAt(0) === 's') {\n        const searchParam = params[0].split(\"=\")[1];\n        this.updateParams(searchParam, \"All\", \"vote_average DESC\");\n      } else if (params[0].charAt(0) === 'g') {\n        const genreParam = params[0].split(\"=\")[1];\n        console.log(genreParam);\n        this.updateParams(\"\", genreParam, \"vote_average DESC\");\n      }\n    } else {\n      this.getMovies();\n    }\n  }\n\n  render() {\n    const result = this.state.result.slice((this.state.currentPage - 1) * this.state.moviesPerPage, this.state.currentPage * this.state.moviesPerPage);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: \"#d2d2d275\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SimpleSelect, {\n      updateParams: this.updateParams,\n      initparams: (this.state.search, this.state.genre, this.state.sortBy),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(List, {\n      list: result,\n      catalogueHidden: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Paginate, {\n      totalMovies: this.state.totalMovies,\n      currentPage: this.state.currentPage,\n      moviePerPage: this.state.moviesPerPage,\n      changePage: this.changePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default SearchPage;","map":{"version":3,"sources":["/home/pawan/frontend/react/react-bs/src/SearchPage.js"],"names":["React","Component","List","axios","Paginate","SimpleSelect","SearchPage","constructor","props","updateParams","search","genre","sortBy","setState","getMovies","changePage","pageno","currentPage","state","moviesPerPage","result","totalMovies","getquery","query","push","join","get","then","res","data","length","componentDidMount","queryParams","location","params","slice","split","console","log","charAt","searchParam","genreParam","render","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport './index.css';\nimport List from './List'\nimport axios from 'axios'\nimport Paginate from './Paginate'\nimport SimpleSelect from './Filter'\n\n\nclass SearchPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPage: 1,\n            moviesPerPage: 24,\n            result: [],\n            totalMovies: 0,\n            search: \"\",\n            genre: \"All\",\n            sortBy: \"vote_average DESC\"\n        }\n    }\n\n    getquery() {\n        const query = [];\n        if (this.state.search !== \"\") {\n            query.push('search=' + this.state.search)\n        }\n        if (this.state.genre !== \"All\") {\n            query.push('genre=' + this.state.genre)\n        }\n        query.push('sortby=' + this.state.sortBy)\n        // 'http://localhost:8080/movie/catalogue?' + \n        // console.log(query)\n        return 'http://localhost:8080/movie/catalogue?' + query.join('&')\n    }\n\n\n    getMovies() {\n        axios.get(this.getquery())\n            .then(res => {\n                this.setState({\n                    result: res.data,\n                    totalMovies: res.data.length,\n                }\n                )\n            }\n            )\n    }\n\n    componentDidMount() {\n        const queryParams = this.props.location.search\n        if(queryParams !== \"\"){\n            // for now we are only considering one qyery param\n            const params = queryParams.slice(1).split(\"&\")\n            console.log(params[0].charAt(0))\n            if(params[0].charAt(0) === 's'){\n                const searchParam = params[0].split(\"=\")[1]\n                this.updateParams(searchParam, \"All\", \"vote_average DESC\")\n            } else if(params[0].charAt(0) === 'g'){\n                const genreParam = params[0].split(\"=\")[1]\n                console.log(genreParam)\n                this.updateParams(\"\", genreParam, \"vote_average DESC\")\n            }\n\n        } else{\n            this.getMovies()\n        }\n    }\n\n\n    updateParams = (search, genre, sortBy) => {\n        this.setState({\n            search: search,\n            genre: genre,\n            sortBy: sortBy,\n        },\n            () => this.getMovies()\n        )\n\n    }\n\n\n    changePage = (pageno) => {\n        this.setState({\n            currentPage: pageno,\n        })\n    }\n\n\n\n\n\n\n    render() {\n        const result = this.state.result.slice((this.state.currentPage - 1) * this.state.moviesPerPage, this.state.currentPage * this.state.moviesPerPage);\n        return (\n            <div style={{ backgroundColor: \"#d2d2d275\" }}>\n                <SimpleSelect updateParams={this.updateParams} initparams = {this.state.search,this.state.genre, this.state.sortBy} />\n                <List list={result} catalogueHidden={true} />\n                <Paginate totalMovies={this.state.totalMovies} currentPage={this.state.currentPage} moviePerPage={this.state.moviesPerPage} changePage={this.changePage} />\n\n            </div >\n        );\n    }\n}\n\nexport default SearchPage;\n"]},"metadata":{},"sourceType":"module"}